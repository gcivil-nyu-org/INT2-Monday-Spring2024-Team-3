{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search History</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="{% static 'backend/css/index_style.css' %}" rel="stylesheet">
    <link href="{% static 'backend/css/review_history.css' %}" rel="stylesheet">
</head>
<body>
  {% include "components/navbar.html" %}
  <button id="clearHistoryButton" class="btn btn-danger float-right mr-3 mt-3">Clear All History</button>
  {% if search_history %}
  <div class="container container-transparent">
      <div class="container reviews py-5">
          <div class="row">
              <div class="col-lg-8 mx-auto text-center">
                  <h2>Search History</h2>
                  <div id="reviews-container">
                      {% for review in search_history %}
                      <div class="review-detail py-0">
                          <div class="container">
                              <div class="row">
                                  <div class="col-lg-8 mx-auto text-center">
                                      <div><strong>Search Input:</strong> {{ review.search }}</div>
                                      <div><strong>Search Type:</strong> {{ review.search_type }}</div>
                                      <div><strong>Date & Time:</strong> {{ review.timestamp|date:"Y-m-d H:i:s" }}</div>
                                      <div class="mt-2">
                                          <a class="btn btn-outline-dark" href="{% url 'search_results' %}?search_events={{ review.search }}&search_type={{ review.search_type }}">Search Again</a>
                                          <a class="btn btn-outline-dark" href="{% url 'delete_search' review.id %}">Delete</a>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      {% endfor %}
                  </div>
              </div>
          </div>
      </div>
  </div>
  {% else %}
  <div class="container mt-5">
      <p class="text-center">You haven't saved any search history.</p>
  </div>
  {% endif %}
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="{% static 'backend/scripts/search_history.js' %}"></script>
</body>
</html>


<div id="myModal3" class="modal">
  <div class="modal-content">
      <button id="close-m3" class="close" aria-label="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
        </svg>
      </button>
    <p>Are you sure you want to delete this search?</p>
    <button id="confirmDeleteButton3">Yes, Delete</button>
    <button id="cancelDeleteButton3">Cancel</button>
  </div>
</div>


<div id="myModal4" class="modal">
  <div class="modal-content">
      <button id="close-m4" class="close" aria-label="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
        </svg>
      </button>
    <p>Are you sure you want to delete all search history?</p>
    <button id="confirmDeleteButton4">Yes, Delete</button>
    <button id="cancelDeleteButton4">Cancel</button>
  </div>
</div>